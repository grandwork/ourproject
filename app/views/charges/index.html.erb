<h1>Listing charges</h1>

<script type="text/javascript">
  $(function() {
  // Charge is the app name
  window.router = new RailsChallenge.Routers.ChargesRouter({charges: <%= @charges.to_json.html_safe -%>});
  Backbone.history.start();
  });
</script>

<h1>List1-Failed Charges</h1>
<table>
  <thead>
    <tr>
      <th>Customer firstname</th>
      <th>Customer lastname</th>
      <th>Amount</th>
      <th>Created</th>            
    </tr>
  </thead>

  <tbody>  	
    <% @failed_charges.each do |charge| %>
      <tr class="list1-background">  
      	<td><%= Customer.find(charge.customer_id).firstname %></td>
      	<td><%= Customer.find(charge.customer_id).lastname  %></td>  
      	<td><%= charge.amount %></td>  
        <td><%= charge.created %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<h1>List 2-Disputed Charges</h1>

<table>
  <thead>
    <tr>
      <th>Customer firstname</th>
      <th>Customer lastname</th>
      <th>Amount</th>
      <th>Created</th>            
    </tr>
  </thead>

  <tbody>
    <% @disputed_charges.each do |charge| %>
      <tr class="list2-background">  
      	<td><%= charge.customer.firstname %></td>
      	<td><%= charge.customer.lastname %></td>  
      	<td><%= charge.amount %></td>  
        <td><%= charge.created %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<h1>List3-Successful Charges</h1>

<table>
  <thead>
    <tr>
      <th>Customer firstname</th>
      <th>Customer lastname</th>
      <th>Amount</th>
      <th>Created</th>            
    </tr>
  </thead>

  <tbody>
    <% @successful_charges.each do |charge| %>
        <tr class="list3-background">  
      	<td><%= Customer.find(charge.customer_id).firstname %></td>
      	<td><%= Customer.find(charge.customer_id).lastname  %></td>  
      	<td><%= charge.amount %></td>  
        <td><%= charge.created %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<br>

<%= link_to 'New Charge', new_charge_path %>